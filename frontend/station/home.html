<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VW Carregamento - Início</title>

  <!-- Tela de Carregamento -->
  <div id="preloader">
    <div class="spinner"></div>
  </div>
  <!-- Aplica  o tema salvo escuro/claro-->
  <script>
    (function () {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
    })();
  </script>

  <link rel="stylesheet" href="../home/css/home.css">
</head>

<body>
  <div class="container">

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>
          VoltWay
          <label class="theme-btn" for="darkModeSwitch" id="themeLabel">☀️ Claro</label>
          <input type="checkbox" id="darkModeSwitch" data-theme-toggle hidden>
        </h2>
      </div>
      <nav>
        <a href="#" class="active"><span>Início</span></a>
        <a href="perfil.html"><span>Perfil</span></a>
      </nav>
      <div class="user-box">
        <p id="nomeUsuario"></p>
        <button class="logout-btn" onclick="logout()">Sair</button>
      </div>
    </aside>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>
          VoltWay
          <label class="theme-btn" for="darkModeSwitch" id="themeLabel">Claro</label>
          <input type="checkbox" id="darkModeSwitch" data-theme-toggle hidden>
        </h2>

      </div>
      <nav>
        <a href="#" class="active" data-page="inicio"><span class="icon"
            aria-hidden="true"></span><span>Início</span></a>
        <a href="perfil.html" data-page="perfil"><span class="icon" aria-hidden="true"></span><span>Perfil</span></a>
      </nav>
      <div class="user-box">
        <p class="nomeUsuario"></p>
        <button class="logout-btn" onclick="logout()">Sair</button>
      </div>
    </aside>

    <!-- HEADER FIXO MOBILE -->
    <div class="mobile-header">
      <div class="left">
        <h2>VoltWay</h2>
        <label class="theme-btn" for="darkModeSwitch" id="themeLabel"></label>
        <input type="checkbox" id="darkModeSwitch" data-theme-toggle hidden>
      </div>

      <div class="right">
        <a href="perfil.html" class="nomeUsuario" aria-label="Ir para perfil"></a>
        <button class="logout-btn" onclick="logout()"></button>
      </div>
    </div>

    <!-- Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Botão fixo -->
    <button id="toggleSidebar">☰</button>

    <!-- Conteúdo principal -->
    <main class="main" id="main">
      <!-- Cabeçalho -->
      <section class="header">
        <div class="header-top">
          <img src="../assets/logo.png" alt="Logo" class="header-logo" />

          <div class="header-text">
            <h1 id="stationTitle">Bem-vindo</h1>
            <p id="stationMsg">
              Experimente o futuro da mobilidade com nossa rede de carregamento.
            </p>
          </div>
        </div>

        <!-- Estatísticas da estação -->
        <div class="stats">
          <div class="stat">
            <strong id="statPotencia">--</strong>
            <span>Potência Máxima</span>
          </div>
          <div class="stat">
            <strong id="statDisponibilidade">--</strong>
            <span>Disponibilidade</span>
          </div>
          <div class="stat">
            <strong id="statPreco">--</strong>
            <span>Preço (R$/kWh)</span>
          </div>
          <div class="stat">
            <strong id="statTelefone">--</strong>
            <span>Telefone</span>
          </div>
        </div>
      </section>

      <!-- Próxima Reserva -->
      <section class="card next-reservation" id="proximaReservaCard">
        <div>
          <h2>Próxima Reserva</h2>
          <p id="textoReserva">Nenhuma reserva agendada.</p>
        </div>
        <div id="listaReservas"></div>
      </section>

      <button class="btn" id="btnDetalhesReserva" style="display:none;">Ver Detalhes</button>
    </main>
  </div>

  <!-- Modal de Detalhes de Reservas -->
  <div id="detalhesReservaModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Minhas Reservas</h3>
      <ul id="listaDetalhesReservas"></ul>

      <!-- Botão extra para limpar canceladas -->
      <button id="btnRemoverCanceladas" class="btn-remover-canceladas">
        Remover Canceladas
      </button>
    </div>
  </div>


  <!-- Modal de Confirmação de Cancelamento -->
  <div id="confirmarCancelamentoModal" class="modal">
    <div class="modal-content">
      <h3>Cancelar Reserva</h3>
      <p>Tem certeza que deseja cancelar esta reserva?</p>
      <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 15px;">
        <button id="btnCancelarConfirmar" class="btn-cancelar-reserva">Sim, Cancelar</button>
        <button id="btnCancelarFechar" class="btn">Não</button>
      </div>
    </div>
  </div>

  <!-- Modal de Agendamento -->
  <div id="agendamentoModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3>Agendar Nova Reserva</h3>
      <form id="formAgendamento">
        <label for="dataReserva">Data:</label>
        <input type="date" id="dataReserva" required>

        <label for="horaReserva">Horário:</label>
        <input type="time" id="horaReserva" required>

        <div style="margin-top: 15px; text-align: right;">
          <button type="submit" class="btn">Confirmar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Google Pay API -->
  <script async src="https://pay.google.com/gp/p/js/pay.js"></script>


  <!-- Scripts  -->
  <script src="../global/Global.js"></script>
  <script src="reserva.js"></script>

</body>

</html>